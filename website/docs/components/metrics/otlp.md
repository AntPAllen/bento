---
title: otlp
slug: otlp
type: metrics
status: beta
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the corresponding source file under internal/impl/otlp.
-->

Exports metrics to an OpenTelemetry Collector using the [OpenTelemetry Protocol (OTLP)](https://opentelemetry.io/docs/specs/otlp/). Both gRPC and HTTP transports are supported through the official OpenTelemetry Go SDK.

```yml
# Config fields, showing default values
metrics:
  otlp:
    protocol: grpc
    endpoint: localhost:4317
    insecure: false
    headers: {}
    export_interval: 10s
    temporality: cumulative
    resource_attributes: {}
    histogram:
      mode: exponential
      buckets: []
    series_ttl: 5m
    max_series: 5000
  mapping: ""
```

## Fields

### `protocol`

The transport protocol used to deliver OTLP metric exports.

Type: `string`

Default: `"grpc"`

Options: `grpc`, `http`.

### `endpoint`

The OTLP collector endpoint. For gRPC this should be `host:port`. For HTTP collectors provide the host:port or full URL depending on your collector configuration.

Type: `string`

Default: `"localhost:4317"`

### `insecure`

Disable transport security when connecting to the collector.

Type: `bool`

Default: `false`

### `headers`

Additional headers to send with every export request.

Type: `object`

Default: `{}`

### `export_interval`

How frequently metrics are exported.

Type: `string`

Default: `"10s"`

### `temporality`

Controls whether cumulative or delta temporality is used for counters and histograms.

Type: `string`

Default: `"cumulative"`

Options: `cumulative`, `delta`.

### `resource_attributes`

Additional resource attributes to add to every export. By default the exporter always sets `service.name` to `bento` and, when available, the Bento engine version via `service.version`. Attributes declared here override those defaults.

Type: `object`

Default: `{}`

### `histogram`

Settings for histogram aggregation.

Type: `object`

Default: `{mode: exponential, buckets: []}`

#### `histogram.mode`

Choose between exponential histograms (default) or explicit bucket histograms. Explicit buckets are expressed in seconds, matching Bento's convention of converting timing metrics from nanoseconds to seconds for histogram exporters.

Type: `string`

Default: `"exponential"`

Options: `exponential`, `explicit`.

#### `histogram.buckets`

Explicit histogram bucket boundaries (in seconds) used when `mode` is `explicit`. Leave empty to use the OpenTelemetry defaults.

Type: `array`

### `series_ttl`

How long to retain a unique label set without updates before it is evicted. Prevents unbounded growth of gauge series caches.

Type: `string`

Default: `"5m"`

### `max_series`

Maximum number of active label sets per metric. When the limit is reached new series are dropped until older ones expire.

Type: `int`

Default: `5000`

## Notes

* Gauges are exported as asynchronous observations. The last recorded value per label set is cached and emitted on each collection. Stale series are evicted after `series_ttl`.
* Timing metrics are recorded as seconds to align with other Bento histogram exporters. Existing documentation for Bento metrics describes this unit conversion in more detail.
