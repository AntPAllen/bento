<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the corresponding source file under internal/impl/otlp.
-->

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Export Bento metrics to an [OpenTelemetry collector](https://opentelemetry.io/docs/collector/) using the OTLP protocol.


<Tabs defaultValue="common" values={[
  { label: 'Common', value: 'common', },
  { label: 'Advanced', value: 'advanced', },
]}>

<TabItem value="common">

```yml
# Common config fields, showing default values
metrics:
  otlp:
    protocol: grpc
    endpoint: "" # No default (protocol specific)
    temporality: cumulative
    histogram:
      mode: exponential
    series_ttl: 5m0s
    max_series: 0
  mapping: ""
```

</TabItem>
<TabItem value="advanced">

```yml
# All config fields, showing default values
metrics:
  otlp:
    protocol: grpc
    endpoint: "" # No default (protocol specific)
    headers: {}
    insecure: false
    export_interval: "" # No default (optional)
    temporality: cumulative
    resource_attributes: {}
    histogram:
      mode: exponential
      buckets: []
    series_ttl: 5m0s
    max_series: 0
  mapping: ""
```

</TabItem>
</Tabs>

## Fields

### `protocol`

Protocol to use when sending OTLP metrics. `grpc` targets the OTLP gRPC endpoint (default), whilst `http` targets the OTLP HTTP/protobuf endpoint.


Type: `string` (choices: `grpc`, `http`)
Default: `"grpc"`

### `endpoint`

Endpoint of the collector to send metrics to. For gRPC this should be host:port (e.g. `localhost:4317`). For HTTP the value should either be host:port or a full URL (e.g. `http://localhost:4318`). When left empty the appropriate OTLP default is used based on the protocol.


Type: `string`
Default: `""`

### `headers`

Additional headers to attach to requests. Applies to both gRPC metadata and HTTP headers.


Type: `object`
Default: `{}`

### `insecure`

Disable TLS when connecting to the collector. When using HTTP this will switch to HTTP instead of HTTPS.


Type: `bool`
Default: `false`

### `export_interval`

How frequently metrics should be exported to the collector. Defaults to the OpenTelemetry SDK default of one minute when left empty.


Type: `string`

### `temporality`

Aggregation temporality used for counters and histograms. `cumulative` is the OTLP default. `delta` emits deltas for counter and histogram instruments whilst keeping gauges cumulative.


Type: `string` (choices: `cumulative`, `delta`)
Default: `"cumulative"`

### `resource_attributes`

Additional OpenTelemetry resource attributes to attach to every metric. By default `service.name` is set to `bento` and `service.version` is populated from the running engine version when not overridden.


Type: `object`
Default: `{}`

### `histogram`

Histogram aggregation behaviour.


Type: `object`
Default: `{}`

### `histogram.mode`

Histogram aggregation mode to use for timing metrics. `exponential` uses the OpenTelemetry exponential histogram (default). `explicit` allows providing explicit bucket boundaries. Timing metrics are converted from nanoseconds into seconds before they are recorded.


Type: `string` (choices: `exponential`, `explicit`)
Default: `"exponential"`

### `histogram.buckets`

Explicit histogram bucket boundaries (in seconds) used when `mode` is `explicit`. Leave empty to use the OpenTelemetry defaults.


Type: `array`
Default: `[]`

### `series_ttl`

How long a gauge series should be retained without updates before being evicted. Set to `0s` to disable eviction.


Type: `string`
Default: `"5m0s"`

### `max_series`

Maximum number of concurrent gauge series cached for callbacks. Additional series are dropped once the cache is full. Set to 0 to disable the limit.


Type: `int`
Default: `0`

